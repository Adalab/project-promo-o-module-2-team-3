"use strict";const diseña=document.querySelector(".form-title-js"),rellena=document.querySelector(".form-title2-js"),comparte=document.querySelector(".form-title3-js"),fieldsetForm=document.querySelectorAll(".form-js");let allInputs=document.querySelectorAll(".js-input");const resetButton=document.querySelector(".preview__button"),paletteDesing=document.querySelectorAll(".list__palette"),namePreview=document.querySelector(".name"),jobPreview=document.querySelector(".profession"),linkedinPreview=document.querySelector(".linkedin-js"),githubPreview=document.querySelector(".github-js"),emailLink=document.querySelector(".js-email"),iconPhone=document.querySelector(".linkPhone"),cardButton=document.querySelector("#button-card"),shareDiv=document.querySelector("#share-card");function resetForm(e){e.preventDefault();for(const e of allInputs)e.value="";namePreview.innerHTML="Nombre y apellidos",jobPreview.innerHTML="Profesión",emailLink.href="",linkedinPreview.href="",githubPreview.href="",iconPhone.href="",profileImage.style.backgroundImage="",profilePreview.style.backgroundImage=""}function handClickCollapsed(e){const t=e.currentTarget.querySelectorAll(".js-arrow");for(let e=0;e<t.length;e++){t[e].classList.toggle("js-arrow-down")}e.currentTarget===rellena?(e.currentTarget.parentNode.classList.toggle("collapsed"),diseña.parentNode.classList.add("collapsed"),comparte.parentNode.classList.add("collapsed")):e.currentTarget===diseña?(e.currentTarget.parentNode.classList.toggle("collapsed"),rellena.parentNode.classList.add("collapsed"),comparte.parentNode.classList.add("collapsed")):e.currentTarget===comparte&&(e.currentTarget.parentNode.classList.toggle("collapsed"),rellena.parentNode.classList.add("collapsed"),diseña.parentNode.classList.add("collapsed"))}resetButton.addEventListener("click",resetForm);const data={name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:"",palette:1};function renderPreviewCard(){""===data.name?namePreview.innerHTML="Nombre y apellidos":namePreview.innerHTML=data.name,""===data.job?jobPreview.innerHTML="Profesión":jobPreview.innerHTML=data.job,""===data.email?emailLink.href="":emailLink.href="mailto:"+data.email,""===data.linkedin?linkedinPreview.href="":linkedinPreview.href=data.linkedin,""===data.github?githubPreview.href="":githubPreview.href=data.github,""===data.phone?iconPhone.href="":iconPhone.href="tel:+34"+data.phone}function getData(e){const t=e.currentTarget.value,r=e.currentTarget.id;if("name"===r)data.name=t;else if("job"===r)data.job=t;else if("email"===r)data.email=t;else if("phone"===r){/^[6-7-9]{1}[0-9]{8}$/.test(t)?data.phone=t:e.currentTarget.title="Por favor, introduce un número de teléfono fijo o móvil de España"}else"linkedin"===r?(console.log(t),data.linkedin=t):"github"===r?(console.log(t),data.github=t):"photo"===r?data.photo=t:"palette"===r&&(data.palette=t);console.log(data),renderPreviewCard()}for(const e of allInputs)e.addEventListener("keyup",getData);function handleCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e)})}function addListenersPalette(){for(const e of paletteDesing)e.addEventListener("click",changeColorPalette)}function changeColorPalette(e){e.currentTarget.children[0].checked;e.currentTarget.classList.contains("second__color")?namePreview.classList.add("color2"):namePreview.classList.remove("color2"),console.log(e.currentTarget.children[0].checked)}addListenersPalette(),rellena.addEventListener("click",handClickCollapsed),comparte.addEventListener("click",handClickCollapsed),diseña.addEventListener("click",handClickCollapsed);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);